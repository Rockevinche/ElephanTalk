(this["webpackJsonpproyecto-web"]=this["webpackJsonpproyecto-web"]||[]).push([[0],{20:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(14),s=r.n(a),c=(r(20),r(2)),o=r.n(c),i=r(4),l=r(3),u=r(8),d="https://posts-pw2021.herokuapp.com/api/v1",b={},m=function(){var e=Object(i.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/one/").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();b.getOnePost=m,b.login=function(){var e=Object(i.a)(o.a.mark((function e(t,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:r})});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,s=a.token,e.abrupt("return",s);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.verifyToken=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.getAllPosts=function(){var e=Object(i.a)(o.a.mark((function e(t,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/all?limit=10&page=").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.getOwnedPosts=function(){var e=Object(i.a)(o.a.mark((function e(t,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/owned?limit=10&page=").concat(r,"}"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.getFavoritePosts=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,n,a,s,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=14;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.favorites,s=a.map(function(){var e=Object(i.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,Promise.all(s);case 11:return c=e.sent,l=c.filter((function(e){return Object.keys(e).length>0})),e.abrupt("return",l);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.getFavoritesIds=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.favorites,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.createPost=function(){var e=Object(i.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.updatePost=function(){var e=Object(i.a)(o.a.mark((function e(t,r,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/update/").concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),b.toggleActive=function(){var e=Object(i.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/toggle/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.like=function(){var e=Object(i.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/like/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.favorite=function(){var e=Object(i.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/fav/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b.comment=function(){var e=Object(i.a)(o.a.mark((function e(t,r,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/comment/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),b.getPagesAll=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/all?limit=10&page=0"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.pages,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.getPagesOwned=function(){var e=Object(i.a)(o.a.mark((function e(t){var r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/post/owned?limit=10&page=0"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.pages,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var x=b,j=r(5),p=r(7),f=r.p+"static/media/Logo.5a33dd12.svg",h=r(0),v=function(e){var t=e.showHamburguer,r=e.onLogOut,n=e.role,a=e.onFavoritePost,s=e.onAllPosts,c=e.onOwnedPosts,o=e.onAddPost,i="bg-dark-200 font-semibold z-10 rounded-bl-md flex absolute top-0 right-0 transition-all duration-500 transform translate-x-0\n                            w-1/2 lg:w-auto\n                            px-3 lg:px-0\n                            flex-col lg:flex-row\n                            lg:translate-y-0\n                            lg: top-2\n                            lg:shadow-none\n                            lg:mt-1 lg:items-center lg:mx-1 lg:uppercase\n                            ".concat(t?"mt-14 shadow":"-translate-y-full");return Object(h.jsxs)("div",{className:i,children:[Object(h.jsx)("button",{onClick:s,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Inicio"}),"admin"===n&&Object(h.jsx)("button",{onClick:o,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Crear"}),Object(h.jsx)("button",{onClick:a,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Favoritas"}),"admin"===n&&Object(h.jsx)("button",{onClick:c,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Mis publicaciones"}),Object(h.jsx)("button",{onClick:r,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Cerrar sesi\xf3n"})]})},g=function(e){var t=e.showHamburguer,r=e.setShowHamburguer,n="w-6 h-6 ".concat(t?"":"hidden"),a="w-6 h-6 ".concat(t?"hidden":"");return Object(h.jsxs)("button",{id:"mobileMenuButton",className:"p-3 focus:outline-none lg:hidden",title:"Open side menu",onClick:function(){return r(!t)},children:[Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#E4E6EB",className:n,viewBox:"0 0 24 24",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#E4E6EB",className:a,viewBox:"0 0 24 24",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})},O=r(6),w=r.p+"static/media/ImageNotFound.eac72ecf.svg",k=function(e){var t=e.image,r=e.title,n=e.description,a=e.id,s=e.active;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"text-gray-400 font-medium flex justify-center text-sm mb-7 mt-6 mx-3 px-2",children:Object(h.jsx)("img",{className:"rounded",src:t,onError:function(e){e.target.onerror=null,e.target.src=w},alt:r})}),Object(h.jsx)(u.b,{to:s?"/view/".concat(a):"#",children:Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2 overflow-x-hidden",children:r})}),Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mb-6 mx-3 px-2 overflow-x-hidden",children:n})]})},y=r(10),N=function(e){var t=e.title,r=e.message;return Object(h.jsxs)("div",{className:"flex bg-transparent rounded-lg p-4 mb-4 w-full text-sm text-primary-200 justify-center",children:[Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5 inline mr-3",viewBox:"0 0 20 20",children:Object(h.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{className:"font-medium",children:t})," ",r]})]})},C=function(e){var t=e.likes,r=e.comments,a=e.id,s=e.setPosts,c=e.active,d=x.comment,b=Object(n.useState)({description:""}),m=Object(l.a)(b,2),j=m[0],f=m[1],v=Object(n.useState)({message:"",title:""}),g=Object(l.a)(v,2),w=g[0],k=g[1],C=Object(n.useState)(!1),P=Object(l.a)(C,2),S=P[0],E=P[1],A=localStorage.getItem("token"),M=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(j.description.length<8)){e.next=5;break}return k({message:"El comentario debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),E(!0),e.abrupt("return");case 5:return e.next=7,d(A,j,a);case 7:if(!e.sent){e.next=15;break}s((function(e){return e.map((function(e){return e._id===a?Object(O.a)(Object(O.a)({},e),{},{comments:[].concat(Object(p.a)(e.comments),[j])}):e}))})),k({message:"El comentario se ha enviado correctamente",title:"\xa1Enhorabuena!"}),E(!0),setTimeout((function(){E(!1)}),5e3),f({description:""}),e.next=17;break;case 15:k({message:"No se pudo enviar el comentario",title:"\xa1Error!"}),E(!0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return e>999&&e<=999999?"".concat((.001*e).toFixed(1),"k"):e>999999?"".concat((1e-6*e).toFixed(1),"M"):e};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex w-full border-t border-dark-100 overflow-x-hidden",children:[Object(h.jsx)(u.b,{to:c?"/view/".concat(a):"#",children:Object(h.jsx)("div",{className:"mt-3 mx-5 flex flex-row",children:Object(h.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 overflow-x-hidden mr-4 items-center",children:["Comentarios:",Object(h.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:z(r.length)})]})})}),Object(h.jsx)("div",{className:"mt-3 mx-5 w-full flex justify-end",children:Object(h.jsxs)("div",{className:"flex text-light-200 font-normal text-sm overflow-x-hidden rounded-md mb-2 mr-4 items-center",children:["Me gustas:",Object(h.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:z(t.length)})]})})]}),c&&Object(h.jsxs)("form",{onSubmit:M,className:"relative flex flex-col items-center self-center w-full max-w-xl p-4 overflow-hidden text-gray-600 focus-within:text-gray-400",children:[S&&Object(h.jsx)(N,{title:w.title,message:w.message}),Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)("span",{className:"absolute right-0 flex items-center pr-6",children:Object(h.jsx)("button",{type:"submit",className:"p-1 focus:outline-none focus:shadow-none hover:text-primary-200 text-light-200",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})})}),Object(h.jsx)("input",{type:"text",className:"w-full py-2 pl-4 pr-10 text-sm bg-dark-100 text-light-100 rounded-lg border border-transparent appearance-none rounded-tg placeholder-gray-400 focus:outline-none focus:text-light-100",placeholder:"Escribir un comentario...",autocomplete:"off",value:j.description,onChange:function(e){var t=e.target,r=t.name,n=t.value;f(Object(O.a)(Object(O.a)({},j),{},Object(y.a)({},r,n)))},name:"description",required:!0})]})]})]})},P=function(e){var t=e.verifyuser,r=e.verifyLike,n=e.verifyFavorite,a=e.onEdit,s=e.onHidde,c=e.onLike,o=e.active,i=e.onFavorite;return Object(h.jsxs)("div",{className:"flex justify-start mb-4 border-t border-dark-100",children:[o&&Object(h.jsxs)("div",{className:"flex w-full mt-1 pt-2 pl-5",children:[Object(h.jsx)("button",{onClick:c,className:"flex justify-center items-center bg-dark-100 ".concat(r?"text-primary-200":"text-light-200"," transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Object(h.jsx)("path",{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),Object(h.jsx)("button",{onClick:i,className:"flex justify-center items-center ".concat(n?"text-red-500":"text-light-200"," bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(h.jsx)("svg",{fill:"none",width:"22px",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),t&&Object(h.jsxs)("div",{className:"flex justify-end w-full mt-1 pt-2 pr-5",children:[o&&Object(h.jsx)("button",{onClick:a,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",stroke:"currentColor",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),Object(h.jsx)("button",{onClick:s,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 ".concat(o?"text-light-200":"text-primary-200"," w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(h.jsx)("svg",{width:"22px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]})},S=function(e){var t=e.username;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex align-center mt-2 px-2 py-3 mx-3",children:[Object(h.jsx)("div",{className:"w-auto h-auto rounded-full border-2 border-primary-200",children:Object(h.jsx)("img",{className:"w-12 h-12 object-cover rounded-full shadow",alt:"User avatar",src:"https://www.svgrepo.com/show/33141/elephant.svg"})}),Object(h.jsx)("div",{className:"flex items-center ml-4",children:Object(h.jsx)("p",{className:"text-light-100 text-lg font-semibold font-montserrat",children:t})})]}),Object(h.jsx)("div",{className:"border-b border-dark-100"})]})},E=function(e){var t=e.role,r=e.post,a=e.activeUsername,s=e.setPosts,c=e.favorites,l=e.setFavorites,u=e.setIsHidden,d=e.setIsAddingFavorite,b=localStorage.getItem("token"),m=x.toggleActive,f=x.like,v=x.getFavoritesIds,g=x.favorite,w=Object(j.g)(),y=r._id,N=r.title,E=r.description,A=r.image,M=r.active,z=r.user.username,L=r.likes,T=r.comments;Object(n.useEffect)((function(){function e(){return e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(b);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var I=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(b,y);case 2:if(!e.sent){e.next=5;break}s((function(e){return e.map((function(e){return e._id===y?Object(O.a)(Object(O.a)({},e),{},{active:!e.active}):e}))})),u((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,y);case 2:if(!e.sent){e.next=4;break}s((function(e){return e.map((function(e){if(e._id===y){var t=e.likes.some((function(e){return e.username===a}))?e.likes.filter((function(e){return e.username!==a})):[].concat(Object(p.a)(e.likes),[{username:a}]);return Object(O.a)(Object(O.a)({},e),{},{likes:t})}return e}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(b,y);case 2:if(!e.sent){e.next=5;break}l((function(e){return e.includes(y)?e.filter((function(e){return e!==y})):[].concat(Object(p.a)(e),[y])})),d((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=z===a&&"admin"===t,U=L.some((function(e){return e.username===a})),q=c.includes(y);return Object(h.jsx)("div",{classNameName:"",children:Object(h.jsx)("div",{className:"flex max-w-xl my-6 bg-dark-200 shadow-md rounded-lg mx-auto",children:Object(h.jsx)("div",{className:"flex items-center w-full",children:Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)(S,{username:z}),Object(h.jsx)(k,{image:A,title:N,description:E,id:y,active:M}),Object(h.jsx)(P,{verifyuser:H,verifyLike:U,verifyFavorite:q,onEdit:function(){return w("/edit/".concat(y))},onHidde:I,active:M,onLike:B,onFavorite:F}),Object(h.jsx)(C,{id:y,likes:L,comments:T,setPosts:s,active:M})]})})})})},A=r(15),M=function(e){var t=e.message,r=void 0===t?"Cargando Publicaciones...":t;return Object(h.jsx)("div",{class:"flex items-center justify-center p-4 m-12",children:Object(h.jsxs)("div",{class:"flex justify-center items-center text-sm text-gray-500",children:[Object(h.jsx)("svg",{fill:"none",className:"w-6 h-6 sm:w-12 sm:h-12 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{"clip-rule":"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor","fill-rule":"evenodd"})}),Object(h.jsx)("p",{className:"text-2xl sm:text-4xl",children:r})]})})},z=function(e){var t=e.role,r=e.posts,a=e.username,s=e.setPosts,c=e.currentPage,o=e.setIsHidden,i=e.setIsAddingFavorite,u=e.fetchNextPage,d=e.hasNextPage,b=e.isLoading,m=Object(n.useState)([]),x=Object(l.a)(m,2),j=x[0],p=x[1];return Object(h.jsxs)("div",{className:"pt-10 pb-8 bg-dark-300",children:[Object(h.jsx)("p",{className:"text-center text-2xl font-bold sm:text-4xl mt-16 text-gray-500",children:c}),0===r.length&&!b&&Object(h.jsx)("p",{className:"text-center text-2xl sm:text-4xl mt-16 text-gray-500",children:"No se encontraron publicaciones :c"}),b&&Object(h.jsx)(M,{}),Object(h.jsx)(A.a,{dataLength:r.length,next:u,hasMore:d,loader:"Publicaciones Favoritas"!==c&&r.length>0&&Object(h.jsx)(M,{}),endMessage:r.length>0&&Object(h.jsx)("p",{className:"text-center text-2xl font-bold sm:text-4xl mt-16 text-gray-500 p-4",children:"Ya has visto todas las publicaciones"}),children:r.map((function(e){return Object(h.jsx)(E,{activeUsername:a,role:t,post:e,setPosts:s,favorites:j,setFavorites:p,setIsHidden:o,setIsAddingFavorite:i},e._id)}))})]})},L=function(e){var t=e.setToken,r=e.username,a=e.role,s=x.getAllPosts,c=x.getFavoritePosts,u=x.getOwnedPosts,d=x.getPagesAll,b=x.getPagesOwned,m=localStorage.getItem("token"),O=Object(n.useState)([]),w=Object(l.a)(O,2),k=w[0],y=w[1],N=Object(n.useState)("Inicio"),C=Object(l.a)(N,2),P=C[0],S=C[1],E=Object(n.useState)(0),A=Object(l.a)(E,2),M=A[0],L=A[1],T=Object(n.useState)(0),I=Object(l.a)(T,2),B=I[0],F=I[1],H=Object(n.useState)(0),U=Object(l.a)(H,2),q=U[0],G=U[1],_=Object(n.useState)(0),R=Object(l.a)(_,2),D=R[0],J=R[1],V=Object(n.useState)(!0),W=Object(l.a)(V,2),Y=W[0],K=W[1],Q=Object(n.useState)(!1),X=Object(l.a)(Q,2),Z=X[0],$=X[1],ee=Object(n.useState)(!1),te=Object(l.a)(ee,2),re=te[0],ne=te[1],ae=Object(n.useState)(!1),se=Object(l.a)(ae,2),ce=se[0],oe=se[1],ie=Object(n.useState)(!0),le=Object(l.a)(ie,2),ue=le[0],de=le[1],be=Object(n.useState)(!1),me=Object(l.a)(be,2),xe=me[0],je=me[1],pe=Object(j.g)();Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(m,0);case 2:return t=e.sent,de(!1),y(t),e.t0=L,e.next=8,d(m);case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=G,e.next=13,b(m);case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,r,n,a,i,l,d,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Inicio"!==P){e.next=14;break}t=[],r=B,n=0;case 4:if(!(n<=B)){e.next=12;break}return e.next=7,s(m,n);case 7:a=e.sent,t=[].concat(Object(p.a)(t),Object(p.a)(a));case 9:n++,e.next=4;break;case 12:y(t),F(r);case 14:if("Publicaciones Favoritas"!==P){e.next=21;break}return e.t0=y,e.next=18,c(m);case 18:e.t1=e.sent,(0,e.t0)(e.t1),K(!1);case 21:if("Mis Publicaciones"!==P){e.next=35;break}i=[],l=D,d=0;case 25:if(!(d<=D)){e.next=33;break}return e.next=28,u(m,d);case 28:b=e.sent,i=[].concat(Object(p.a)(i),Object(p.a)(b));case 30:d++,e.next=25;break;case 33:y(i),J(l);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,re]),Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ce]);var fe=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"Inicio"!==P){e.next=6;break}return e.next=4,s(m,B+1);case 4:t=e.sent,F((function(e){return e+1}));case 6:if("Mis Publicaciones"!==P){e.next=11;break}return e.next=9,u(m,D+1);case 9:t=e.sent,J((function(e){return e+1}));case 11:(B===M-1&&"Inicio"===P||D===q-1&&"Mis Publicaciones"===P)&&K(!1),y([].concat(Object(p.a)(k),Object(p.a)(t)));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(0),e.t0=y,e.next=4,s(m,0);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),oe(!ce),S("Inicio"),e.t2=L,e.next=11,d(m);case 11:e.t3=e.sent,(0,e.t2)(e.t3),K(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,c(m);case 3:e.t1=e.sent,(0,e.t0)(e.t1),oe(!ce),S("Publicaciones Favoritas"),K(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(0),e.t0=y,e.next=4,u(m,0);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),oe(!ce),S("Mis Publicaciones"),e.t2=G,e.next=11,b(m);case 11:e.t3=e.sent,(0,e.t2)(e.t3),K(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("section",{className:"bg-dark-300 h-screen",children:[Object(h.jsxs)("nav",{className:"bg-dark-200 shadow fixed z-10 inset-x-0 top-0 flex justify-between items-center",children:[Object(h.jsx)("div",{className:"w-auto my-2 mx-4 h-12 sm:h-12 inline-flex p-2 sm:p-1",children:Object(h.jsx)("img",{src:f,alt:"logo"})}),Object(h.jsx)(v,{showHamburguer:xe,onLogOut:function(){t(void 0),localStorage.removeItem("token"),localStorage.removeItem("role")},onFavoritePost:ve,onAllPosts:he,onOwnedPosts:ge,onAddPost:function(){return pe("/new")},role:a}),Object(h.jsx)(g,{showHamburguer:xe,setShowHamburguer:je})]}),Object(h.jsx)(z,{username:r,role:a,posts:k,setPosts:y,currentPage:P,setIsHidden:$,setIsAddingFavorite:ne,fetchNextPage:fe,hasNextPage:Y,isLoading:ue,pagesAll:M,pageAll:B,pagesOwned:q,pageOwned:D})]})},T=function(e){var t=e.type,r=void 0===t?"button":t,n=e.child,a=e.onReturnHome;return Object(h.jsx)("button",{class:"btn text-1xl rounded-lg border border-primary-200 p-1 px-4 cursor-pointer text-white font-bold ml-2 bg-primary-200 hover:bg-primary-100",type:r,onClick:a,children:n})},I=function(e){var t=e.placeholder,r=e.type,n=void 0===r?"text":r,a=e.name,s=e.onChange,c=e.value,o=e.required;return Object(h.jsx)("input",{className:"title bg-gray-100 bg-dark-100 rounded-lg text-light-200 border border-dark-200 focus:text-light-100 p-2 mb-4 outline-none",placeholder:t,type:n,onChange:s,value:c,name:a,required:o})},B=function(e){var t=e.placeholder,r=e.required,n=e.value,a=e.onChange,s=e.name;return Object(h.jsx)("textarea",{class:"description bg-dark-100 resize-none text-light-200 sec p-3 mb-4 h-60 border rounded-lg border-dark-200 focus:text-light-100 outline-none",placeholder:t,value:n,name:s,onChange:a,required:r})},F=function(){var e=x.createPost,t=Object(n.useState)({message:"",title:""}),r=Object(l.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(!1),u=Object(l.a)(c,2),d=u[0],b=u[1],m=Object(j.g)(),p=localStorage.getItem("token"),f=Object(n.useState)({title:"",description:"",image:""}),v=Object(l.a)(f,2),g=v[0],w=v[1],k=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(O.a)(Object(O.a)({},g),{},Object(y.a)({},n,a)))},C=function(){var t=Object(i.a)(o.a.mark((function t(r){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=g.title,a=g.description,!(n.length<8||n.length>32)){t.next=6;break}return s({message:"El t\xedtulo debe tener entre 8 y 32 caracteres",title:"\xa1Advertencia!"}),b(!0),t.abrupt("return");case 6:if(!(a.length<8)){t.next=10;break}return s({message:"La descripci\xf3n debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),b(!0),t.abrupt("return");case 10:return t.next=12,e(p,g);case 12:if(!t.sent){t.next=19;break}s({message:"El post se ha creado correctamente",title:"\xa1Enhorabuena!"}),b(!0),setTimeout((function(){b(!1)}),5e3),w({title:"",description:"",image:""}),t.next=21;break;case 19:s({message:"No se pudo crear el post",title:"\xa1Error!"}),b(!0);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)("section",{className:"flex h-screen bg-dark-300",children:Object(h.jsxs)("form",{class:"m-auto w-full bg-dark-300",onSubmit:C,children:[Object(h.jsx)("h1",{class:" text-4xl text-light-100 heading text-center font-bold m-5 text-gray-800",children:"Nueva publicaci\xf3n"}),Object(h.jsxs)("div",{class:"bg-dark-200 rounded-lg editor mx-auto w-10/12 flex flex-col mb-5 text-gray-800 border border-dark-300 p-4 shadow-lg max-w-2xl",children:[Object(h.jsx)(I,{placeholder:"Titulo de la publicaci\xf3n",onChange:function(e){return k(e,w)},value:g.title,name:"title",required:"true"}),Object(h.jsx)(B,{placeholder:"Escriba la descripcion de tu publicaci\xf3n",onChange:function(e){return k(e,w)},value:g.description,name:"description",required:"true"}),Object(h.jsx)(I,{placeholder:"URL de Imagen",onChange:function(e){return k(e,w)},value:g.image,name:"image",required:"true"}),d&&Object(h.jsx)(N,{title:a.title,message:a.message}),Object(h.jsxs)("div",{class:"buttons flex justify-end",children:[Object(h.jsx)(T,{child:"Cancelar",type:"button",onReturnHome:function(){return m("/home")}}),Object(h.jsx)(T,{child:"Publicar",type:"submit"})]})]})]})})},H=function(e){var t=e.username,r=Object(j.g)();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex align-center justify-between mt-2 px-2 py-3 mx-3",children:[Object(h.jsxs)("div",{class:"flex",children:[Object(h.jsx)("div",{className:"w-auto h-auto rounded-full border-2 border-primary-200",children:Object(h.jsx)("img",{className:"w-12 h-12 object-cover rounded-full shadow",alt:"User avatar",src:"https://www.svgrepo.com/show/33141/elephant.svg"})}),Object(h.jsx)("div",{className:"flex items-center ml-4",children:Object(h.jsx)("p",{className:"text-light-100 text-lg font-semibold font-montserrat",children:t})})]}),Object(h.jsx)("div",{class:"flex justify-center items-center",children:Object(h.jsx)("button",{onClick:function(){return r("/home")},className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(h.jsx)("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})})]}),Object(h.jsx)("div",{className:"border-b border-dark-100"})]})},U=function(e){var t=e.title,r=e.description,n=e.image;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"text-gray-400 max-h-128 flex justify-center font-medium text-sm mb-7 mt-6 mx-3 px-2",children:Object(h.jsx)("img",{className:"rounded object-contain",src:n,onError:function(e){e.target.onerror=null,e.target.src=w},alt:t})}),Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2 overflow-x-hidden",children:t}),Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mb-6 mx-3 px-2 overflow-x-hidden",children:r})]})},q=function(e){var t=e.verifyUser,r=e.verifyLike,n=e.verifyFavorite,a=e.onEdit,s=e.onLike,c=e.onFavorite;return Object(h.jsxs)("div",{className:"flex justify-start mb-4 border-t border-dark-100",children:[Object(h.jsxs)("div",{className:"flex w-full mt-1 pt-2 pl-5",children:[Object(h.jsx)("button",{onClick:s,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full ".concat(r?"text-primary-200":"text-light-200"," cursor-pointer mr-2"),children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Object(h.jsx)("path",{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),Object(h.jsx)("button",{onClick:c,className:"flex justify-center items-center ".concat(n?"text-red-500":"text-light-200"," bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(h.jsx)("svg",{fill:"none",width:"22px",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),t&&Object(h.jsx)("div",{className:"flex justify-end w-full mt-1 pt-2 pr-5",children:Object(h.jsx)("button",{onClick:a,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",stroke:"currentColor",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})})})]})},G=function(e){var t=e.comments,r=e.likes,a=e.id,s=e.setPost,c=e.user,u=x.comment,d=Object(n.useState)({description:""}),b=Object(l.a)(d,2),m=b[0],j=b[1],f=Object(n.useState)({message:"",title:""}),v=Object(l.a)(f,2),g=v[0],w=v[1],k=Object(n.useState)(!1),C=Object(l.a)(k,2),P=C[0],S=C[1],E=localStorage.getItem("token"),A=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(m.description.length<8)){e.next=5;break}return w({message:"El comentario debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),S(!0),e.abrupt("return");case 5:return e.next=7,u(E,m,a);case 7:if(!e.sent){e.next=15;break}s((function(e){return Object(O.a)(Object(O.a)({},e),{},{comments:[].concat(Object(p.a)(e.comments),[Object(O.a)(Object(O.a)({},m),{},{user:{username:c},_id:"".concat(Date().toLocaleString(),"_").concat(c)})])})})),w({message:"El comentario se ha enviado correctamente",title:"\xa1Enhorabuena!"}),S(!0),setTimeout((function(){S(!1)}),5e3),j({description:""}),e.next=17;break;case 15:w({message:"No se pudo enviar el comentario",title:"\xa1Error!"}),S(!0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return e>999&&e<=999999?"".concat((.001*e).toFixed(1),"k"):e>999999?"".concat((1e-6*e).toFixed(1),"M"):e};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex w-full border-t border-dark-100",children:[Object(h.jsx)("div",{className:"mt-3 mx-5 flex flex-row",children:Object(h.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 mr-4 items-center",children:["Comentarios:",Object(h.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:M(t.length)})]})}),Object(h.jsx)("div",{className:"mt-3 mx-5 w-full flex justify-end",children:Object(h.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 mr-4 items-center",children:["Me gustas:",Object(h.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:M(r.length)})]})})]}),Object(h.jsxs)("form",{onSubmit:A,className:"relative flex flex-col items-center self-center w-full p-4 overflow-hidden text-gray-600 focus-within:text-gray-400",children:[P&&Object(h.jsx)(N,{title:g.title,message:g.message}),Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)("span",{className:"absolute right-0 flex items-center pr-6",children:Object(h.jsx)("button",{type:"submit",className:"p-1 focus:outline-none focus:shadow-none hover:text-primary-200 text-light-200",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})})}),Object(h.jsx)("input",{type:"text",className:"w-full py-2 pl-4 pr-10 text-sm bg-dark-100 text-light-100 rounded-lg border border-transparent appearance-none rounded-tg placeholder-gray-400 focus:outline-none focus:text-light-100",placeholder:"Escribir un comentario...",autocomplete:"off",value:m.description,onChange:function(e){var t=e.target,r=t.name,n=t.value;j(Object(O.a)(Object(O.a)({},m),{},Object(y.a)({},r,n)))},name:"description",required:!0})]})]})]})},_=function(e){var t=e.username,r=e.description;return Object(h.jsx)("div",{className:"mt-3 mx-5 mb-6",children:Object(h.jsxs)("div",{className:"bg-dark-100 rounded-lg py-2",children:[Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2",children:t}),Object(h.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mx-3 px-2 overflow-x-hidden",children:r})]})})},R=function(e){var t=e.comments;return Object(h.jsx)("div",{children:t.map((function(e){var t=e._id,r=e.description,n=e.user.username;return Object(h.jsx)(_,{description:r,username:n},t)}))})},D=function(e){var t=e.activeUsername,r=e.role,a=localStorage.getItem("token"),s=Object(j.g)(),c=x.like,u=x.favorite,d=x.getOnePost,b=x.getFavoritesIds,m=Object(n.useState)(!0),f=Object(l.a)(m,2),v=f[0],g=f[1],w=Object(n.useState)(!1),k=Object(l.a)(w,2),y=k[0],N=k[1],C=Object(j.h)().idPost,P=Object(n.useState)([]),S=Object(l.a)(P,2),E=S[0],A=S[1],z=Object(n.useState)({title:"",description:"",image:"",comments:[],username:"",likes:[],active:!1}),L=Object(l.a)(z,2),T=L[0],I=L[1];Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a,C);case 2:t=e.sent,Object.keys(t).length?I({title:t.title,description:t.description,image:t.image,comments:t.comments,username:t.user.username,likes:t.likes,active:t.active}):(I({title:"La publicaci\xf3n no se ha encontrado :c",description:"Algo ha salido mal al intentar cargar la publicaci\xf3n",image:"",comments:[],username:"Usuario no encontrado",likes:[],active:!0}),N(!0)),g(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(a);case 2:t=e.sent,A(t);case 4:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var B=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(a,C);case 2:if(!e.sent){e.next=4;break}I((function(e){var r=e.likes.some((function(e){return e.username===t}))?e.likes.filter((function(e){return e.username!==t})):[].concat(Object(p.a)(e.likes),[{username:t}]);return Object(O.a)(Object(O.a)({},e),{},{likes:r})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(a,C);case 2:if(!e.sent){e.next=4;break}A((function(e){return e.includes(C)?e.filter((function(e){return e!==C})):[].concat(Object(p.a)(e),[C])}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=T.username===t&&"admin"===r,D=T.likes.some((function(e){return e.username===t})),J=E.includes(C);return Object(h.jsx)("section",{className:"bg-dark-300 h-screen",children:Object(h.jsx)("div",{className:"pt-8 pb-8 bg-dark-300",children:Object(h.jsxs)("div",{classNameName:" bg-dark-300",children:[v&&Object(h.jsx)(M,{message:"Cargando publicaci\xf3n..."}),!v&&Object(h.jsx)("div",{className:"flex max-w-6xl my-6 bg-dark-200 shadow-md rounded-lg mx-auto",children:Object(h.jsx)("div",{className:"flex items-center w-full",children:Object(h.jsxs)("div",{className:"w-full",children:[Object(h.jsx)(H,{username:T.username}),Object(h.jsx)(U,{title:T.title,description:T.description,image:T.image}),!y&&Object(h.jsx)(q,{verifyUser:_,verifyLike:D,verifyFavorite:J,onEdit:function(){return s("/edit/".concat(C))},onLike:B,onFavorite:F}),!y&&Object(h.jsx)(G,{comments:T.comments,likes:T.likes,id:C,setPost:I,user:t}),!y&&Object(h.jsx)(R,{comments:T.comments})]})})})]})})})},J=function(){var e=Object(j.h)().idPost,t=x.updatePost,r=x.getOnePost,a=Object(n.useState)({message:"",title:""}),s=Object(l.a)(a,2),c=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),m=b[0],p=b[1],f=Object(j.g)(),v=localStorage.getItem("token"),g=Object(n.useState)({title:"",description:"",image:""}),w=Object(l.a)(g,2),k=w[0],C=w[1];Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(o.a.mark((function t(){var n,a,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(v,e);case 2:n=t.sent,a=n.title,s=n.description,c=n.image,C({title:a,description:s,image:c});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var P=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(O.a)(Object(O.a)({},k),{},Object(y.a)({},n,a)))},S=function(){var r=Object(i.a)(o.a.mark((function r(n){var a,s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),a=k.title,s=k.description,!(a.length<8||a.length>32)){r.next=6;break}return u({message:"El t\xedtulo debe tener entre 8 y 32 caracteres",title:"\xa1Advertencia!"}),p(!0),r.abrupt("return");case 6:if(!(s.length<8)){r.next=10;break}return u({message:"La descripci\xf3n debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),p(!0),r.abrupt("return");case 10:return r.next=12,t(v,k,e);case 12:if(!r.sent){r.next=18;break}u({message:"El post se ha editado correctamente",title:"\xa1Enhorabuena!"}),p(!0),setTimeout((function(){p(!1)}),5e3),r.next=20;break;case 18:u({message:"No se pudo editar el post",title:"\xa1Error!"}),p(!0);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(h.jsx)("section",{className:"flex h-screen bg-dark-300",children:Object(h.jsxs)("form",{class:"m-auto w-full bg-dark-300",onSubmit:S,children:[Object(h.jsx)("h1",{class:" text-4xl text-light-100 heading text-center font-bold m-5 text-gray-800",children:"Editar publicaci\xf3n"}),Object(h.jsxs)("div",{class:"bg-dark-200 rounded-lg editor mx-auto w-10/12 flex flex-col mb-5 text-gray-800 border border-dark-300 p-4 shadow-lg max-w-2xl",children:[Object(h.jsx)(I,{placeholder:"Titulo de la publicaci\xf3n",onChange:function(e){return P(e,C)},value:k.title,name:"title",required:"true"}),Object(h.jsx)(B,{placeholder:"Escriba la descripcion de tu publicaci\xf3n",onChange:function(e){return P(e,C)},value:k.description,name:"description",required:"true"}),Object(h.jsx)(I,{placeholder:"URL de Imagen",onChange:function(e){return P(e,C)},value:k.image,name:"image",required:"true"}),m&&Object(h.jsx)(N,{title:c.title,message:c.message}),Object(h.jsxs)("div",{class:"buttons flex justify-end",children:[Object(h.jsx)(T,{child:"Cancelar",type:"button",onReturnHome:function(){return f("/home")}}),Object(h.jsx)(T,{child:"Editar",type:"submit"})]})]})]})})},V=function(e){var t=e.setToken,r=e.role,n=e.username;return Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/home",element:Object(h.jsx)(L,{setToken:t,role:r,username:n})}),Object(h.jsx)(j.b,{path:"/new",element:Object(h.jsx)(F,{})}),Object(h.jsx)(j.b,{path:"/view/:idPost",element:Object(h.jsx)(D,{activeUsername:n,role:r})}),Object(h.jsx)(j.b,{path:"/edit/:idPost",element:Object(h.jsx)(J,{})}),Object(h.jsx)(j.b,{path:"*",element:Object(h.jsx)(j.a,{to:"/home"})})]})},W=function(e){var t=e.setToken,r=e.role,n=e.username;return Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/home",element:Object(h.jsx)(L,{setToken:t,role:r,username:n})}),Object(h.jsx)(j.b,{path:"/view/:idPost",element:Object(h.jsx)(D,{activeUsername:n,role:r})}),Object(h.jsx)(j.b,{path:"*",element:Object(h.jsx)(j.a,{to:"/home"})})]})},Y=function(e){var t=e.type,r=void 0===t?"text":t,n=e.name,a=e.placeholder,s=e.onChange,c=e.value;return Object(h.jsx)("div",{className:"pb-2 pt-4",children:Object(h.jsx)("input",{type:r,name:n,placeholder:a,className:"block w-full p-4 text-lg rounded-sm bg-black font-montserrat",onChange:s,value:c})})},K=function(e){var t=e.child;return Object(h.jsx)("div",{className:"px-4 pb-2 pt-4",children:Object(h.jsx)("button",{type:"submit",className:"uppercase block w-full p-4 text-lg font-montserrat font-bold rounded-full bg-primary-200 hover:bg-primary-100 focus:outline-none",children:t})})},Q=function(e){var t=e.setToken,r=x.login,a=Object(n.useState)({user:"",password:""}),s=Object(l.a)(a,2),c=s[0],u=s[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),m=b[0],j=b[1],p=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(O.a)(Object(O.a)({},c),{},Object(y.a)({},n,a)))},v=function(){var e=Object(i.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,r(c.user,c.password);case 3:(a=e.sent)?t(a):(j(!0),u({user:"",password:""}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("section",{className:"min-h-screen flex items-stretch text-white",children:[Object(h.jsxs)("div",{className:"lg:flex w-1/2 hidden bg-gray-500 bg-no-repeat bg-cover relative items-center bg-login-image",children:[Object(h.jsx)("div",{className:"absolute bg-black opacity-60 inset-0 z-0"}),Object(h.jsx)("div",{className:"w-full px-24 z-10",children:Object(h.jsx)("h1",{className:"text-5xl font-bold font-oswald text-left tracking-wide",children:"Connect with phantastic people"})})]}),Object(h.jsxs)("div",{className:"lg:w-1/2 w-full flex items-center justify-center text-center md:px-16 px-0 z-0 bg-dark-300",children:[Object(h.jsx)("div",{className:"absolute lg:hidden z-10 inset-0 bg-gray-500 bg-no-repeat bg-cover items-center bg-login-image",children:Object(h.jsx)("div",{className:"absolute bg-black opacity-60 inset-0 z-0"})}),Object(h.jsxs)("div",{className:"w-full py-6 z-20",children:[Object(h.jsx)("img",{src:f,alt:"logo",className:"w-auto my-6 h-10 sm:h-11 inline-flex"}),Object(h.jsxs)("form",{className:"sm:w-2/3 w-full px-4 lg:px-0 mx-auto",onSubmit:v,children:[m&&Object(h.jsx)(N,{title:"\xa1Advertencia!",message:"No se ha podido iniciar sesi\xf3n, credenciales incorrectas"}),Object(h.jsx)(Y,{name:"user",placeholder:"User or Email",onChange:function(e){return p(e,u)},value:c.user}),Object(h.jsx)(Y,{name:"password",placeholder:"Password",type:"password",onChange:function(e){return p(e,u)},value:c.password}),Object(h.jsx)(K,{child:"Login"})]})]})]})]})},X=function(e){var t=e.setToken;return Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{path:"/login",element:Object(h.jsx)(Q,{setToken:t})}),Object(h.jsx)(j.b,{path:"*",element:Object(h.jsx)(j.a,{to:"/login"})})]})},Z=function(){var e=x.verifyToken,t=Object(n.useState)(localStorage.getItem("token")||void 0),r=Object(l.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(localStorage.getItem("role")||void 0),d=Object(l.a)(c,2),b=d[0],m=d[1],j=Object(n.useState)(void 0),p=Object(l.a)(j,2),f=p[0],v=p[1];return Object(n.useEffect)((function(){function t(){return(t=Object(i.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}if(localStorage.setItem("token",a),b&&f){t.next=9;break}return t.next=5,e(a);case 5:r=t.sent,localStorage.setItem("role",r.role),m(r.role),v(r.username);case 9:t.next=12;break;case 11:m(void 0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a]),Object(h.jsxs)(u.a,{children:["user"===b&&Object(h.jsx)(W,{setToken:s,username:f,role:b}),"admin"===b&&Object(h.jsx)(V,{setToken:s,username:f,role:b}),(!a||!b)&&Object(h.jsx)(X,{setToken:s})]})};var $=function(){return Object(h.jsx)(Z,{})};s.a.render(Object(h.jsx)($,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4d9948b4.chunk.js.map