(this["webpackJsonpproyecto-web"]=this["webpackJsonpproyecto-web"]||[]).push([[0],{32:function(e,t,r){},34:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(26),c=r.n(a),s=(r(32),r(2)),o=r(6),i=r(5),l=r(10),u="https://puce-stormy-codfish.cyclic.app/api/v1",d={},b=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/one/").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();d.getOnePost=b,d.login=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){var n,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:r})});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,c=a.token,e.abrupt("return",c);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.verifyToken=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var r,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d.getAllPosts=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){var n,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/all?limit=10&page=").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.getOwnedPosts=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){var n,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/owned?limit=10&page=").concat(r,"}"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.getFavoritePosts=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var r,n,a,c,i,l;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=14;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.favorites,c=a.map(function(){var e=Object(o.a)(Object(s.a)().mark((function e(r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,Promise.all(c);case 11:return i=e.sent,l=i.filter((function(e){return Object.keys(e).length>0})),e.abrupt("return",l);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d.getFavoritesIds=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var r,n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/fav"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.favorites,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d.createPost=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.updatePost=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r,n){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/update/").concat(n),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),d.toggleActive=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/toggle/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.like=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/like/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.favorite=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/fav/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),d.comment=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,r,n){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/comment/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify(r)});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),d.getPagesAll=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var r,n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/all?limit=10&page=0"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.pages,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d.getPagesOwned=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var r,n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/post/owned?limit=10&page=0"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return n=e.sent,a=n.pages,e.abrupt("return",a);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var j=d,m=r(4),x=r(8),p=r.p+"static/media/Logo.5a33dd12.svg",f=r(0),h=function(e){var t=e.showHamburguer,r=e.onLogOut,n=e.role,a=e.onFavoritePost,c=e.onAllPosts,s=e.onOwnedPosts,o=e.onAddPost,i="bg-dark-200 font-semibold z-10 rounded-bl-md flex absolute top-0 right-0 transition-all duration-500 transform translate-x-0\n                            w-1/2 lg:w-auto\n                            px-3 lg:px-0\n                            flex-col lg:flex-row\n                            lg:translate-y-0\n                            lg: top-2\n                            lg:shadow-none\n                            lg:mt-1 lg:items-center lg:mx-1 lg:uppercase\n                            ".concat(t?"mt-14 shadow":"-translate-y-full");return Object(f.jsxs)("div",{className:i,children:[Object(f.jsx)("button",{onClick:c,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Inicio"}),"admin"===n&&Object(f.jsx)("button",{onClick:o,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Crear"}),Object(f.jsx)("button",{onClick:a,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Favoritas"}),"admin"===n&&Object(f.jsx)("button",{onClick:s,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Mis publicaciones"}),Object(f.jsx)("button",{onClick:r,className:"font-montserrat text-light-100 font-bold mx-0 sm:mx-2 my-2 border-b-2 border-transparent hover:border-primary-200 hover:text-primary-200 transition-all duration-500 py-1 sm:p-0",children:"Cerrar sesi\xf3n"})]})},O=function(e){var t=e.showHamburguer,r=e.setShowHamburguer,n="w-6 h-6 ".concat(t?"":"hidden"),a="w-6 h-6 ".concat(t?"hidden":"");return Object(f.jsxs)("button",{id:"mobileMenuButton",className:"p-3 focus:outline-none lg:hidden",title:"Open side menu",onClick:function(){return r(!t)},children:[Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#E4E6EB",className:n,viewBox:"0 0 24 24",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#E4E6EB",className:a,viewBox:"0 0 24 24",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})},v=r(9),g=r.p+"static/media/ImageNotFound.eac72ecf.svg",w=function(e){var t=e.image,r=e.title,n=e.description,a=e.id,c=e.active;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"text-gray-400 font-medium flex justify-center text-sm mb-7 mt-6 mx-3 px-2",children:Object(f.jsx)("img",{className:"rounded",src:t,onError:function(e){e.target.onerror=null,e.target.src=g},alt:r})}),Object(f.jsx)(l.b,{to:c?"/view/".concat(a):"#",children:Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2 overflow-x-hidden",children:r})}),Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mb-6 mx-3 px-2 overflow-x-hidden",children:n})]})},k=r(7),y=function(e){var t=e.title,r=e.message;return Object(f.jsxs)("div",{className:"flex bg-transparent rounded-lg p-4 mb-4 w-full text-sm text-primary-200 justify-center",children:[Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5 inline mr-3",viewBox:"0 0 20 20",children:Object(f.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{className:"font-medium",children:t})," ",r]})]})},N=function(e){var t=e.likes,r=e.comments,a=e.id,c=e.setPosts,u=e.active,d=j.comment,b=Object(n.useState)({description:""}),m=Object(i.a)(b,2),p=m[0],h=m[1],O=Object(n.useState)({message:"",title:""}),g=Object(i.a)(O,2),w=g[0],N=g[1],C=Object(n.useState)(!1),P=Object(i.a)(C,2),S=P[0],E=P[1],A=localStorage.getItem("token"),M=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(p.description.length<8)){e.next=5;break}return N({message:"El comentario debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),E(!0),e.abrupt("return");case 5:return e.next=7,d(A,p,a);case 7:if(!e.sent){e.next=15;break}c((function(e){return e.map((function(e){return e._id===a?Object(v.a)(Object(v.a)({},e),{},{comments:[].concat(Object(x.a)(e.comments),[p])}):e}))})),N({message:"El comentario se ha enviado correctamente",title:"\xa1Enhorabuena!"}),E(!0),setTimeout((function(){E(!1)}),5e3),h({description:""}),e.next=17;break;case 15:N({message:"No se pudo enviar el comentario",title:"\xa1Error!"}),E(!0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return e>999&&e<=999999?"".concat((.001*e).toFixed(1),"k"):e>999999?"".concat((1e-6*e).toFixed(1),"M"):e};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"flex w-full border-t border-dark-100 overflow-x-hidden",children:[Object(f.jsx)(l.b,{to:u?"/view/".concat(a):"#",children:Object(f.jsx)("div",{className:"mt-3 mx-5 flex flex-row",children:Object(f.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 overflow-x-hidden mr-4 items-center",children:["Comentarios:",Object(f.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:z(r.length)})]})})}),Object(f.jsx)("div",{className:"mt-3 mx-5 w-full flex justify-end",children:Object(f.jsxs)("div",{className:"flex text-light-200 font-normal text-sm overflow-x-hidden rounded-md mb-2 mr-4 items-center",children:["Me gustas:",Object(f.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:z(t.length)})]})})]}),u&&Object(f.jsxs)("form",{onSubmit:M,className:"relative flex flex-col items-center self-center w-full max-w-xl p-4 overflow-hidden text-gray-600 focus-within:text-gray-400",children:[S&&Object(f.jsx)(y,{title:w.title,message:w.message}),Object(f.jsxs)("div",{className:"w-full",children:[Object(f.jsx)("span",{className:"absolute right-0 flex items-center pr-6",children:Object(f.jsx)("button",{type:"submit",className:"p-1 focus:outline-none focus:shadow-none hover:text-primary-200 text-light-200",children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})})}),Object(f.jsx)("input",{type:"text",className:"w-full py-2 pl-4 pr-10 text-sm bg-dark-100 text-light-100 rounded-lg border border-transparent appearance-none rounded-tg placeholder-gray-400 focus:outline-none focus:text-light-100",placeholder:"Escribir un comentario...",autocomplete:"off",value:p.description,onChange:function(e){var t=e.target,r=t.name,n=t.value;h(Object(v.a)(Object(v.a)({},p),{},Object(k.a)({},r,n)))},name:"description",required:!0})]})]})]})},C=function(e){var t=e.verifyuser,r=e.verifyLike,n=e.verifyFavorite,a=e.onEdit,c=e.onHidde,s=e.onLike,o=e.active,i=e.onFavorite;return Object(f.jsxs)("div",{className:"flex justify-start mb-4 border-t border-dark-100",children:[o&&Object(f.jsxs)("div",{className:"flex w-full mt-1 pt-2 pl-5",children:[Object(f.jsx)("button",{onClick:s,className:"flex justify-center items-center bg-dark-100 ".concat(r?"text-primary-200":"text-light-200"," transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Object(f.jsx)("path",{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),Object(f.jsx)("button",{onClick:i,className:"flex justify-center items-center ".concat(n?"text-red-500":"text-light-200"," bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(f.jsx)("svg",{fill:"none",width:"22px",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),t&&Object(f.jsxs)("div",{className:"flex justify-end w-full mt-1 pt-2 pr-5",children:[o&&Object(f.jsx)("button",{onClick:a,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",stroke:"currentColor",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),Object(f.jsx)("button",{onClick:c,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 ".concat(o?"text-light-200":"text-primary-200"," w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(f.jsx)("svg",{width:"22px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]})},P=function(e){var t=e.username;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"flex align-center mt-2 px-2 py-3 mx-3",children:[Object(f.jsx)("div",{className:"w-auto h-auto rounded-full border-2 border-primary-200",children:Object(f.jsx)("img",{className:"w-12 h-12 object-cover rounded-full shadow",alt:"User avatar",src:"https://www.svgrepo.com/show/33141/elephant.svg"})}),Object(f.jsx)("div",{className:"flex items-center ml-4",children:Object(f.jsx)("p",{className:"text-light-100 text-lg font-semibold font-montserrat",children:t})})]}),Object(f.jsx)("div",{className:"border-b border-dark-100"})]})},S=function(e){var t=e.role,r=e.post,a=e.activeUsername,c=e.setPosts,i=e.favorites,l=e.setFavorites,u=e.setIsHidden,d=e.setIsAddingFavorite,b=localStorage.getItem("token"),p=j.toggleActive,h=j.like,O=j.getFavoritesIds,g=j.favorite,k=Object(m.o)(),y=r._id,S=r.title,E=r.description,A=r.image,M=r.active,z=r.user.username,L=r.likes,T=r.comments;Object(n.useEffect)((function(){function e(){return e=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(b);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var I=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b,y);case 2:if(!e.sent){e.next=5;break}c((function(e){return e.map((function(e){return e._id===y?Object(v.a)(Object(v.a)({},e),{},{active:!e.active}):e}))})),u((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(b,y);case 2:if(!e.sent){e.next=4;break}c((function(e){return e.map((function(e){if(e._id===y){var t=e.likes.some((function(e){return e.username===a}))?e.likes.filter((function(e){return e.username!==a})):[].concat(Object(x.a)(e.likes),[{username:a}]);return Object(v.a)(Object(v.a)({},e),{},{likes:t})}return e}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(b,y);case 2:if(!e.sent){e.next=5;break}l((function(e){return e.includes(y)?e.filter((function(e){return e!==y})):[].concat(Object(x.a)(e),[y])})),d((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=z===a&&"admin"===t,q=L.some((function(e){return e.username===a})),U=i.includes(y);return Object(f.jsx)("div",{classNameName:"",children:Object(f.jsx)("div",{className:"flex max-w-xl my-6 bg-dark-200 shadow-md rounded-lg mx-auto",children:Object(f.jsx)("div",{className:"flex items-center w-full",children:Object(f.jsxs)("div",{className:"w-full",children:[Object(f.jsx)(P,{username:z}),Object(f.jsx)(w,{image:A,title:S,description:E,id:y,active:M}),Object(f.jsx)(C,{verifyuser:H,verifyLike:q,verifyFavorite:U,onEdit:function(){return k("/edit/".concat(y))},onHidde:I,active:M,onLike:B,onFavorite:F}),Object(f.jsx)(N,{id:y,likes:L,comments:T,setPosts:c,active:M})]})})})})},E=r(27),A=function(e){var t=e.message,r=void 0===t?"Cargando Publicaciones...":t;return Object(f.jsx)("div",{class:"flex items-center justify-center p-4 m-12",children:Object(f.jsxs)("div",{class:"flex justify-center items-center text-sm text-gray-500",children:[Object(f.jsx)("svg",{fill:"none",className:"w-6 h-6 sm:w-12 sm:h-12 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{"clip-rule":"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor","fill-rule":"evenodd"})}),Object(f.jsx)("p",{className:"text-2xl sm:text-4xl",children:r})]})})},M=function(e){var t=e.role,r=e.posts,a=e.username,c=e.setPosts,s=e.currentPage,o=e.setIsHidden,l=e.setIsAddingFavorite,u=e.fetchNextPage,d=e.hasNextPage,b=e.isLoading,j=Object(n.useState)([]),m=Object(i.a)(j,2),x=m[0],p=m[1];return Object(f.jsxs)("div",{className:"pt-10 pb-8 bg-dark-300",children:[Object(f.jsx)("p",{className:"text-center text-2xl font-bold sm:text-4xl mt-16 text-gray-500",children:s}),0===r.length&&!b&&Object(f.jsx)("p",{className:"text-center text-2xl sm:text-4xl mt-16 text-gray-500",children:"No se encontraron publicaciones :c"}),b&&Object(f.jsx)(A,{}),Object(f.jsx)(E.a,{dataLength:r.length,next:u,hasMore:d,loader:"Publicaciones Favoritas"!==s&&r.length>0&&Object(f.jsx)(A,{}),endMessage:r.length>0&&Object(f.jsx)("p",{className:"text-center text-2xl font-bold sm:text-4xl mt-16 text-gray-500 p-4",children:"Ya has visto todas las publicaciones"}),children:r.map((function(e){return Object(f.jsx)(S,{activeUsername:a,role:t,post:e,setPosts:c,favorites:x,setFavorites:p,setIsHidden:o,setIsAddingFavorite:l},e._id)}))})]})},z=function(e){var t=e.setToken,r=e.username,a=e.role,c=j.getAllPosts,l=j.getFavoritePosts,u=j.getOwnedPosts,d=j.getPagesAll,b=j.getPagesOwned,v=localStorage.getItem("token"),g=Object(n.useState)([]),w=Object(i.a)(g,2),k=w[0],y=w[1],N=Object(n.useState)("Inicio"),C=Object(i.a)(N,2),P=C[0],S=C[1],E=Object(n.useState)(0),A=Object(i.a)(E,2),z=A[0],L=A[1],T=Object(n.useState)(0),I=Object(i.a)(T,2),B=I[0],F=I[1],H=Object(n.useState)(0),q=Object(i.a)(H,2),U=q[0],G=q[1],_=Object(n.useState)(0),R=Object(i.a)(_,2),D=R[0],J=R[1],V=Object(n.useState)(!0),W=Object(i.a)(V,2),Y=W[0],K=W[1],Q=Object(n.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(n.useState)(!1),te=Object(i.a)(ee,2),re=te[0],ne=te[1],ae=Object(n.useState)(!1),ce=Object(i.a)(ae,2),se=ce[0],oe=ce[1],ie=Object(n.useState)(!0),le=Object(i.a)(ie,2),ue=le[0],de=le[1],be=Object(n.useState)(!1),je=Object(i.a)(be,2),me=je[0],xe=je[1],pe=Object(m.o)();Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(v,0);case 2:return t=e.sent,de(!1),y(t),e.t0=L,e.next=8,d(v);case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=G,e.next=13,b(v);case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(Object(s.a)().mark((function e(){var t,r,n,a,o,i,d,b;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Inicio"!==P){e.next=14;break}t=[],r=B,n=0;case 4:if(!(n<=B)){e.next=12;break}return e.next=7,c(v,n);case 7:a=e.sent,t=[].concat(Object(x.a)(t),Object(x.a)(a));case 9:n++,e.next=4;break;case 12:y(t),F(r);case 14:if("Publicaciones Favoritas"!==P){e.next=21;break}return e.t0=y,e.next=18,l(v);case 18:e.t1=e.sent,(0,e.t0)(e.t1),K(!1);case 21:if("Mis Publicaciones"!==P){e.next=35;break}o=[],i=D,d=0;case 25:if(!(d<=D)){e.next=33;break}return e.next=28,u(v,d);case 28:b=e.sent,o=[].concat(Object(x.a)(o),Object(x.a)(b));case 30:d++,e.next=25;break;case 33:y(o),J(i);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,re]),Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[se]);var fe=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"Inicio"!==P){e.next=6;break}return e.next=4,c(v,B+1);case 4:t=e.sent,F((function(e){return e+1}));case 6:if("Mis Publicaciones"!==P){e.next=11;break}return e.next=9,u(v,D+1);case 9:t=e.sent,J((function(e){return e+1}));case 11:(B===z-1&&"Inicio"===P||D===U-1&&"Mis Publicaciones"===P)&&K(!1),y([].concat(Object(x.a)(k),Object(x.a)(t)));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(0),e.t0=y,e.next=4,c(v,0);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),oe(!se),S("Inicio"),e.t2=L,e.next=11,d(v);case 11:e.t3=e.sent,(0,e.t2)(e.t3),K(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,l(v);case 3:e.t1=e.sent,(0,e.t0)(e.t1),oe(!se),S("Publicaciones Favoritas"),K(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(0),e.t0=y,e.next=4,u(v,0);case 4:return e.t1=e.sent,(0,e.t0)(e.t1),oe(!se),S("Mis Publicaciones"),e.t2=G,e.next=11,b(v);case 11:e.t3=e.sent,(0,e.t2)(e.t3),K(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"bg-dark-300 h-screen",children:[Object(f.jsxs)("nav",{className:"bg-dark-200 shadow fixed z-10 inset-x-0 top-0 flex justify-between items-center",children:[Object(f.jsx)("div",{className:"w-auto my-2 mx-4 h-12 sm:h-12 inline-flex p-2 sm:p-1",children:Object(f.jsx)("img",{src:p,alt:"logo"})}),Object(f.jsx)(h,{showHamburguer:me,onLogOut:function(){t(void 0),localStorage.removeItem("token"),localStorage.removeItem("role")},onFavoritePost:Oe,onAllPosts:he,onOwnedPosts:ve,onAddPost:function(){return pe("/new")},role:a}),Object(f.jsx)(O,{showHamburguer:me,setShowHamburguer:xe})]}),Object(f.jsx)(M,{username:r,role:a,posts:k,setPosts:y,currentPage:P,setIsHidden:$,setIsAddingFavorite:ne,fetchNextPage:fe,hasNextPage:Y,isLoading:ue,pagesAll:z,pageAll:B,pagesOwned:U,pageOwned:D})]})},L=function(e){var t=e.type,r=void 0===t?"button":t,n=e.child,a=e.onReturnHome;return Object(f.jsx)("button",{class:"btn text-1xl rounded-lg border border-primary-200 p-1 px-4 cursor-pointer text-white font-bold ml-2 bg-primary-200 hover:bg-primary-100",type:r,onClick:a,children:n})},T=function(e){var t=e.placeholder,r=e.type,n=void 0===r?"text":r,a=e.name,c=e.onChange,s=e.value,o=e.required;return Object(f.jsx)("input",{className:"title bg-gray-100 bg-dark-100 rounded-lg text-light-200 border border-dark-200 focus:text-light-100 p-2 mb-4 outline-none",placeholder:t,type:n,onChange:c,value:s,name:a,required:o})},I=function(e){var t=e.placeholder,r=e.required,n=e.value,a=e.onChange,c=e.name;return Object(f.jsx)("textarea",{class:"description bg-dark-100 resize-none text-light-200 sec p-3 mb-4 h-60 border rounded-lg border-dark-200 focus:text-light-100 outline-none",placeholder:t,value:n,name:c,onChange:a,required:r})},B=function(){var e=j.createPost,t=Object(n.useState)({message:"",title:""}),r=Object(i.a)(t,2),a=r[0],c=r[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),d=u[0],b=u[1],x=Object(m.o)(),p=localStorage.getItem("token"),h=Object(n.useState)({title:"",description:"",image:""}),O=Object(i.a)(h,2),g=O[0],w=O[1],N=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(v.a)(Object(v.a)({},g),{},Object(k.a)({},n,a)))},C=function(){var t=Object(o.a)(Object(s.a)().mark((function t(r){var n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=g.title,a=g.description,!(n.length<8||n.length>32)){t.next=6;break}return c({message:"El t\xedtulo debe tener entre 8 y 32 caracteres",title:"\xa1Advertencia!"}),b(!0),t.abrupt("return");case 6:if(!(a.length<8)){t.next=10;break}return c({message:"La descripci\xf3n debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),b(!0),t.abrupt("return");case 10:return t.next=12,e(p,g);case 12:if(!t.sent){t.next=19;break}c({message:"El post se ha creado correctamente",title:"\xa1Enhorabuena!"}),b(!0),setTimeout((function(){b(!1)}),5e3),w({title:"",description:"",image:""}),t.next=21;break;case 19:c({message:"No se pudo crear el post",title:"\xa1Error!"}),b(!0);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("section",{className:"flex h-screen bg-dark-300",children:Object(f.jsxs)("form",{class:"m-auto w-full bg-dark-300",onSubmit:C,children:[Object(f.jsx)("h1",{class:" text-4xl text-light-100 heading text-center font-bold m-5 text-gray-800",children:"Nueva publicaci\xf3n"}),Object(f.jsxs)("div",{class:"bg-dark-200 rounded-lg editor mx-auto w-10/12 flex flex-col mb-5 text-gray-800 border border-dark-300 p-4 shadow-lg max-w-2xl",children:[Object(f.jsx)(T,{placeholder:"Titulo de la publicaci\xf3n",onChange:function(e){return N(e,w)},value:g.title,name:"title",required:"true"}),Object(f.jsx)(I,{placeholder:"Escriba la descripcion de tu publicaci\xf3n",onChange:function(e){return N(e,w)},value:g.description,name:"description",required:"true"}),Object(f.jsx)(T,{placeholder:"URL de Imagen",onChange:function(e){return N(e,w)},value:g.image,name:"image",required:"true"}),d&&Object(f.jsx)(y,{title:a.title,message:a.message}),Object(f.jsxs)("div",{class:"buttons flex justify-end",children:[Object(f.jsx)(L,{child:"Cancelar",type:"button",onReturnHome:function(){return x("/home")}}),Object(f.jsx)(L,{child:"Publicar",type:"submit"})]})]})]})})},F=function(e){var t=e.username,r=Object(m.o)();return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"flex align-center justify-between mt-2 px-2 py-3 mx-3",children:[Object(f.jsxs)("div",{class:"flex",children:[Object(f.jsx)("div",{className:"w-auto h-auto rounded-full border-2 border-primary-200",children:Object(f.jsx)("img",{className:"w-12 h-12 object-cover rounded-full shadow",alt:"User avatar",src:"https://www.svgrepo.com/show/33141/elephant.svg"})}),Object(f.jsx)("div",{className:"flex items-center ml-4",children:Object(f.jsx)("p",{className:"text-light-100 text-lg font-semibold font-montserrat",children:t})})]}),Object(f.jsx)("div",{class:"flex justify-center items-center",children:Object(f.jsx)("button",{onClick:function(){return r("/home")},className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(f.jsx)("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:Object(f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})})]}),Object(f.jsx)("div",{className:"border-b border-dark-100"})]})},H=function(e){var t=e.title,r=e.description,n=e.image;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"text-gray-400 max-h-128 flex justify-center font-medium text-sm mb-7 mt-6 mx-3 px-2",children:Object(f.jsx)("img",{className:"rounded object-contain",src:n,onError:function(e){e.target.onerror=null,e.target.src=g},alt:t})}),Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2 overflow-x-hidden",children:t}),Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mb-6 mx-3 px-2 overflow-x-hidden",children:r})]})},q=function(e){var t=e.verifyUser,r=e.verifyLike,n=e.verifyFavorite,a=e.onEdit,c=e.onLike,s=e.onFavorite;return Object(f.jsxs)("div",{className:"flex justify-start mb-4 border-t border-dark-100",children:[Object(f.jsxs)("div",{className:"flex w-full mt-1 pt-2 pl-5",children:[Object(f.jsx)("button",{onClick:c,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full ".concat(r?"text-primary-200":"text-light-200"," cursor-pointer mr-2"),children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Object(f.jsx)("path",{"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),Object(f.jsx)("button",{onClick:s,className:"flex justify-center items-center ".concat(n?"text-red-500":"text-light-200"," bg-dark-100 transition ease-out duration-300 w-10 h-10 text-center rounded-full cursor-pointer mr-2"),children:Object(f.jsx)("svg",{fill:"none",width:"22px",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),t&&Object(f.jsx)("div",{className:"flex justify-end w-full mt-1 pt-2 pr-5",children:Object(f.jsx)("button",{onClick:a,className:"flex justify-center items-center bg-dark-100 transition ease-out duration-300 hover:text-primary-200 w-10 h-10 text-center rounded-full text-light-200 cursor-pointer mr-2",children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",stroke:"currentColor",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})})})]})},U=function(e){var t=e.comments,r=e.likes,a=e.id,c=e.setPost,l=e.user,u=j.comment,d=Object(n.useState)({description:""}),b=Object(i.a)(d,2),m=b[0],p=b[1],h=Object(n.useState)({message:"",title:""}),O=Object(i.a)(h,2),g=O[0],w=O[1],N=Object(n.useState)(!1),C=Object(i.a)(N,2),P=C[0],S=C[1],E=localStorage.getItem("token"),A=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(m.description.length<8)){e.next=5;break}return w({message:"El comentario debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),S(!0),e.abrupt("return");case 5:return e.next=7,u(E,m,a);case 7:if(!e.sent){e.next=15;break}c((function(e){return Object(v.a)(Object(v.a)({},e),{},{comments:[].concat(Object(x.a)(e.comments),[Object(v.a)(Object(v.a)({},m),{},{user:{username:l},_id:"".concat(Date().toLocaleString(),"_").concat(l)})])})})),w({message:"El comentario se ha enviado correctamente",title:"\xa1Enhorabuena!"}),S(!0),setTimeout((function(){S(!1)}),5e3),p({description:""}),e.next=17;break;case 15:w({message:"No se pudo enviar el comentario",title:"\xa1Error!"}),S(!0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return e>999&&e<=999999?"".concat((.001*e).toFixed(1),"k"):e>999999?"".concat((1e-6*e).toFixed(1),"M"):e};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"flex w-full border-t border-dark-100",children:[Object(f.jsx)("div",{className:"mt-3 mx-5 flex flex-row",children:Object(f.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 mr-4 items-center",children:["Comentarios:",Object(f.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:M(t.length)})]})}),Object(f.jsx)("div",{className:"mt-3 mx-5 w-full flex justify-end",children:Object(f.jsxs)("div",{className:"flex text-light-200 font-normal text-sm rounded-md mb-2 mr-4 items-center",children:["Me gustas:",Object(f.jsx)("div",{className:"ml-1 text-light-200 font-thin text-ms",children:M(r.length)})]})})]}),Object(f.jsxs)("form",{onSubmit:A,className:"relative flex flex-col items-center self-center w-full p-4 overflow-hidden text-gray-600 focus-within:text-gray-400",children:[P&&Object(f.jsx)(y,{title:g.title,message:g.message}),Object(f.jsxs)("div",{className:"w-full",children:[Object(f.jsx)("span",{className:"absolute right-0 flex items-center pr-6",children:Object(f.jsx)("button",{type:"submit",className:"p-1 focus:outline-none focus:shadow-none hover:text-primary-200 text-light-200",children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:Object(f.jsx)("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})})})}),Object(f.jsx)("input",{type:"text",className:"w-full py-2 pl-4 pr-10 text-sm bg-dark-100 text-light-100 rounded-lg border border-transparent appearance-none rounded-tg placeholder-gray-400 focus:outline-none focus:text-light-100",placeholder:"Escribir un comentario...",autocomplete:"off",value:m.description,onChange:function(e){var t=e.target,r=t.name,n=t.value;p(Object(v.a)(Object(v.a)({},m),{},Object(k.a)({},r,n)))},name:"description",required:!0})]})]})]})},G=function(e){var t=e.username,r=e.description;return Object(f.jsx)("div",{className:"mt-3 mx-5 mb-6",children:Object(f.jsxs)("div",{className:"bg-dark-100 rounded-lg py-2",children:[Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-semibold text-lg mb-2 mx-3 px-2",children:t}),Object(f.jsx)("p",{className:"font-montserrat text-light-200 font-thin text-sm mx-3 px-2 overflow-x-hidden",children:r})]})})},_=function(e){var t=e.comments;return Object(f.jsx)("div",{children:t.map((function(e){var t=e._id,r=e.description,n=e.user.username;return Object(f.jsx)(G,{description:r,username:n},t)}))})},R=function(e){var t=e.activeUsername,r=e.role,a=localStorage.getItem("token"),c=Object(m.o)(),l=j.like,u=j.favorite,d=j.getOnePost,b=j.getFavoritesIds,p=Object(n.useState)(!0),h=Object(i.a)(p,2),O=h[0],g=h[1],w=Object(n.useState)(!1),k=Object(i.a)(w,2),y=k[0],N=k[1],C=Object(m.q)().idPost,P=Object(n.useState)([]),S=Object(i.a)(P,2),E=S[0],M=S[1],z=Object(n.useState)({title:"",description:"",image:"",comments:[],username:"",likes:[],active:!1}),L=Object(i.a)(z,2),T=L[0],I=L[1];Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(a,C);case 2:t=e.sent,Object.keys(t).length?I({title:t.title,description:t.description,image:t.image,comments:t.comments,username:t.user.username,likes:t.likes,active:t.active}):(I({title:"La publicaci\xf3n no se ha encontrado :c",description:"Algo ha salido mal al intentar cargar la publicaci\xf3n",image:"",comments:[],username:"Usuario no encontrado",likes:[],active:!0}),N(!0)),g(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(a);case 2:t=e.sent,M(t);case 4:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var B=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(a,C);case 2:if(!e.sent){e.next=4;break}I((function(e){var r=e.likes.some((function(e){return e.username===t}))?e.likes.filter((function(e){return e.username!==t})):[].concat(Object(x.a)(e.likes),[{username:t}]);return Object(v.a)(Object(v.a)({},e),{},{likes:r})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(a,C);case 2:if(!e.sent){e.next=4;break}M((function(e){return e.includes(C)?e.filter((function(e){return e!==C})):[].concat(Object(x.a)(e),[C])}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=T.username===t&&"admin"===r,D=T.likes.some((function(e){return e.username===t})),J=E.includes(C);return Object(f.jsx)("section",{className:"bg-dark-300 h-screen",children:Object(f.jsx)("div",{className:"pt-8 pb-8 bg-dark-300",children:Object(f.jsxs)("div",{classNameName:" bg-dark-300",children:[O&&Object(f.jsx)(A,{message:"Cargando publicaci\xf3n..."}),!O&&Object(f.jsx)("div",{className:"flex max-w-6xl my-6 bg-dark-200 shadow-md rounded-lg mx-auto",children:Object(f.jsx)("div",{className:"flex items-center w-full",children:Object(f.jsxs)("div",{className:"w-full",children:[Object(f.jsx)(F,{username:T.username}),Object(f.jsx)(H,{title:T.title,description:T.description,image:T.image}),!y&&Object(f.jsx)(q,{verifyUser:R,verifyLike:D,verifyFavorite:J,onEdit:function(){return c("/edit/".concat(C))},onLike:B,onFavorite:G}),!y&&Object(f.jsx)(U,{comments:T.comments,likes:T.likes,id:C,setPost:I,user:t}),!y&&Object(f.jsx)(_,{comments:T.comments})]})})})]})})})},D=function(){var e=Object(m.q)().idPost,t=j.updatePost,r=j.getOnePost,a=Object(n.useState)({message:"",title:""}),c=Object(i.a)(a,2),l=c[0],u=c[1],d=Object(n.useState)(!1),b=Object(i.a)(d,2),x=b[0],p=b[1],h=Object(m.o)(),O=localStorage.getItem("token"),g=Object(n.useState)({title:"",description:"",image:""}),w=Object(i.a)(g,2),N=w[0],C=w[1];Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(Object(s.a)().mark((function t(){var n,a,c,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(O,e);case 2:n=t.sent,a=n.title,c=n.description,o=n.image,C({title:a,description:c,image:o});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var P=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(v.a)(Object(v.a)({},N),{},Object(k.a)({},n,a)))},S=function(){var r=Object(o.a)(Object(s.a)().mark((function r(n){var a,c;return Object(s.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),a=N.title,c=N.description,!(a.length<8||a.length>32)){r.next=6;break}return u({message:"El t\xedtulo debe tener entre 8 y 32 caracteres",title:"\xa1Advertencia!"}),p(!0),r.abrupt("return");case 6:if(!(c.length<8)){r.next=10;break}return u({message:"La descripci\xf3n debe tener al menos 8 caracteres",title:"\xa1Advertencia!"}),p(!0),r.abrupt("return");case 10:return r.next=12,t(O,N,e);case 12:if(!r.sent){r.next=18;break}u({message:"El post se ha editado correctamente",title:"\xa1Enhorabuena!"}),p(!0),setTimeout((function(){p(!1)}),5e3),r.next=20;break;case 18:u({message:"No se pudo editar el post",title:"\xa1Error!"}),p(!0);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(f.jsx)("section",{className:"flex h-screen bg-dark-300",children:Object(f.jsxs)("form",{class:"m-auto w-full bg-dark-300",onSubmit:S,children:[Object(f.jsx)("h1",{class:" text-4xl text-light-100 heading text-center font-bold m-5 text-gray-800",children:"Editar publicaci\xf3n"}),Object(f.jsxs)("div",{class:"bg-dark-200 rounded-lg editor mx-auto w-10/12 flex flex-col mb-5 text-gray-800 border border-dark-300 p-4 shadow-lg max-w-2xl",children:[Object(f.jsx)(T,{placeholder:"Titulo de la publicaci\xf3n",onChange:function(e){return P(e,C)},value:N.title,name:"title",required:"true"}),Object(f.jsx)(I,{placeholder:"Escriba la descripcion de tu publicaci\xf3n",onChange:function(e){return P(e,C)},value:N.description,name:"description",required:"true"}),Object(f.jsx)(T,{placeholder:"URL de Imagen",onChange:function(e){return P(e,C)},value:N.image,name:"image",required:"true"}),x&&Object(f.jsx)(y,{title:l.title,message:l.message}),Object(f.jsxs)("div",{class:"buttons flex justify-end",children:[Object(f.jsx)(L,{child:"Cancelar",type:"button",onReturnHome:function(){return h("/home")}}),Object(f.jsx)(L,{child:"Editar",type:"submit"})]})]})]})})},J=function(e){var t=e.setToken,r=e.role,n=e.username;return Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{path:"/home",element:Object(f.jsx)(z,{setToken:t,role:r,username:n})}),Object(f.jsx)(m.b,{path:"/new",element:Object(f.jsx)(B,{})}),Object(f.jsx)(m.b,{path:"/view/:idPost",element:Object(f.jsx)(R,{activeUsername:n,role:r})}),Object(f.jsx)(m.b,{path:"/edit/:idPost",element:Object(f.jsx)(D,{})}),Object(f.jsx)(m.b,{path:"*",element:Object(f.jsx)(m.a,{to:"/home"})})]})},V=function(e){var t=e.setToken,r=e.role,n=e.username;return Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{path:"/home",element:Object(f.jsx)(z,{setToken:t,role:r,username:n})}),Object(f.jsx)(m.b,{path:"/view/:idPost",element:Object(f.jsx)(R,{activeUsername:n,role:r})}),Object(f.jsx)(m.b,{path:"*",element:Object(f.jsx)(m.a,{to:"/home"})})]})},W=function(e){var t=e.type,r=void 0===t?"text":t,n=e.name,a=e.placeholder,c=e.onChange,s=e.value;return Object(f.jsx)("div",{className:"pb-2 pt-4",children:Object(f.jsx)("input",{type:r,name:n,placeholder:a,className:"block w-full p-4 text-lg rounded-sm bg-black font-montserrat",onChange:c,value:s})})},Y=function(e){var t=e.child;return Object(f.jsx)("div",{className:"px-4 pb-2 pt-4",children:Object(f.jsx)("button",{type:"submit",className:"uppercase block w-full p-4 text-lg font-montserrat font-bold rounded-full bg-primary-200 hover:bg-primary-100 focus:outline-none",children:t})})},K=function(e){var t=e.setToken,r=j.login,a=Object(n.useState)({user:"",password:""}),c=Object(i.a)(a,2),l=c[0],u=c[1],d=Object(n.useState)(!1),b=Object(i.a)(d,2),m=b[0],x=b[1],h=function(e,t){var r=e.target,n=r.name,a=r.value;t(Object(v.a)(Object(v.a)({},l),{},Object(k.a)({},n,a)))},O=function(){var e=Object(o.a)(Object(s.a)().mark((function e(n){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,r(l.user,l.password);case 3:(a=e.sent)?t(a):(x(!0),u({user:"",password:""}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"min-h-screen flex items-stretch text-white",children:[Object(f.jsxs)("div",{className:"lg:flex w-1/2 hidden bg-gray-500 bg-no-repeat bg-cover relative items-center bg-login-image",children:[Object(f.jsx)("div",{className:"absolute bg-black opacity-60 inset-0 z-0"}),Object(f.jsx)("div",{className:"w-full px-24 z-10",children:Object(f.jsx)("h1",{className:"text-5xl font-bold font-oswald text-left tracking-wide",children:"Connect with phantastic people"})})]}),Object(f.jsxs)("div",{className:"lg:w-1/2 w-full flex items-center justify-center text-center md:px-16 px-0 z-0 bg-dark-300",children:[Object(f.jsx)("div",{className:"absolute lg:hidden z-10 inset-0 bg-gray-500 bg-no-repeat bg-cover items-center bg-login-image",children:Object(f.jsx)("div",{className:"absolute bg-black opacity-60 inset-0 z-0"})}),Object(f.jsxs)("div",{className:"w-full py-6 z-20",children:[Object(f.jsx)("img",{src:p,alt:"logo",className:"w-auto my-6 h-10 sm:h-11 inline-flex"}),Object(f.jsxs)("form",{className:"sm:w-2/3 w-full px-4 lg:px-0 mx-auto",onSubmit:O,children:[m&&Object(f.jsx)(y,{title:"\xa1Advertencia!",message:"No se ha podido iniciar sesi\xf3n, credenciales incorrectas"}),Object(f.jsx)(W,{name:"user",placeholder:"User or Email",onChange:function(e){return h(e,u)},value:l.user}),Object(f.jsx)(W,{name:"password",placeholder:"Password",type:"password",onChange:function(e){return h(e,u)},value:l.password}),Object(f.jsx)(Y,{child:"Login"})]})]})]})]})},Q=function(e){var t=e.setToken;return Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{path:"/login",element:Object(f.jsx)(K,{setToken:t})}),Object(f.jsx)(m.b,{path:"*",element:Object(f.jsx)(m.a,{to:"/login"})})]})},X=function(){var e=j.verifyToken,t=Object(n.useState)(localStorage.getItem("token")||void 0),r=Object(i.a)(t,2),a=r[0],c=r[1],u=Object(n.useState)(localStorage.getItem("role")||void 0),d=Object(i.a)(u,2),b=d[0],m=d[1],x=Object(n.useState)(void 0),p=Object(i.a)(x,2),h=p[0],O=p[1];return Object(n.useEffect)((function(){function t(){return(t=Object(o.a)(Object(s.a)().mark((function t(){var r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}if(localStorage.setItem("token",a),b&&h){t.next=9;break}return t.next=5,e(a);case 5:r=t.sent,localStorage.setItem("role",r.role),m(r.role),O(r.username);case 9:t.next=12;break;case 11:m(void 0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[a]),Object(f.jsxs)(l.a,{children:["user"===b&&Object(f.jsx)(V,{setToken:c,username:h,role:b}),"admin"===b&&Object(f.jsx)(J,{setToken:c,username:h,role:b}),(!a||!b)&&Object(f.jsx)(Q,{setToken:c})]})};var Z=function(){return Object(f.jsx)(X,{})};c.a.render(Object(f.jsx)(Z,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.0789f07d.chunk.js.map